(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4032ccf6"],{2532:function(e,t,r){"use strict";var n=r("23e7"),a=r("5a34"),i=r("1d80"),o=r("577e"),s=r("ab13");n({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~o(i(this)).indexOf(o(a(e)),arguments.length>1?arguments[1]:void 0)}})},"311f":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"95%",margin:"20px auto"}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-input",{staticStyle:{width:"27%"},attrs:{placeholder:"请输入内容"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearchUser},slot:"append"})],1),r("el-button",{staticClass:"ml-10",attrs:{type:"primary"},on:{click:e.handleReset}},[e._v("重置")]),r("el-button",{staticClass:"ml-10",attrs:{type:"primary"},on:{click:function(t){return e.handleDialogVisible("add",null)}}},[e._v("添加")])],1)])],1),r("hr"),r("div",{staticClass:"table-container"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"default-sort":{prop:"role"},"highlight-current-row":"",data:e.currentTableData,"tooltip-effect":"dark",border:""}},[r("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),r("el-table-column",{attrs:{prop:"user_name",label:"用户名","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"role",label:"角色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:"user"===t.row.role?"":"success",effect:"dark"}},[e._v(e._s("user"===t.row.role?"普通用户":"管理员"))])]}}])}),r("el-table-column",{attrs:{prop:"state",label:"状态",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.state?r("el-tag",{attrs:{type:"success"}},[e._v("启用")]):r("el-tag",{attrs:{type:"danger"}},[e._v("禁用")])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-dropdown",{on:{command:function(r){return e.handleCommand(r,t.row)}}},[r("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("编辑")]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"edit"}},[e._v("修改密码")]),r("el-dropdown-item",{attrs:{command:"role"}},[e._v("切换角色")]),r("el-dropdown-item",{attrs:{command:"state"}},[0===t.row.state?r("span",{staticStyle:{color:"#67c23a"}},[e._v("状态启用")]):r("span",{staticStyle:{color:"red"}},[e._v("状态禁用")])])],1)],1),r("el-button",{staticClass:"ml-10",attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{staticStyle:{float:"right","margin-top":"30px"},attrs:{background:"","page-size":10,"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.tableData.length},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:e.title,visible:e.centerDialogVisible,width:"30%",top:"20vh",center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[r("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.loginRules,"label-position":"left"}},[r("el-form-item",{attrs:{prop:"user_name"}},[r("el-input",{attrs:{name:"user_name",type:"text",placeholder:"请输入用户名"},model:{value:e.loginForm.user_name,callback:function(t){e.$set(e.loginForm,"user_name",t)},expression:"loginForm.user_name"}},[r("span",{attrs:{slot:"prefix"},slot:"prefix"})])],1),r("el-form-item",{attrs:{prop:"email"}},[r("el-input",{attrs:{name:"email",placeholder:"请输入邮箱",type:"email"},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}},[r("span",{attrs:{slot:"prefix"},slot:"prefix"})])],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{name:"password",type:e.pwdType,placeholder:"请输入密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleChangeInfo.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[r("span",{attrs:{slot:"prefix"},slot:"prefix"}),(e.pwdType,r("span",{attrs:{slot:"suffix"},on:{click:e.showPwd},slot:"suffix"}))])],1),r("el-form-item",{staticStyle:{"text-align":"center"}},[r("span",{staticStyle:{position:"relative",top:"2px",right:"8px"}},[e._v("状态")]),r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","inactive-value":0,"active-value":1,disabled:""},model:{value:e.loginForm.state,callback:function(t){e.$set(e.loginForm,"state",t)},expression:"loginForm.state"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleChangeInfo.apply(null,arguments)}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"修改密码",visible:e.pwnDialogVisible,width:"30%",center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.pwnDialogVisible=t}}},[r("el-input",{attrs:{type:"password"}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.pwnDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"}},[e._v("确 定")])],1)],1)],1)},a=[],i=r("1da1"),o=(r("96cf"),r("fb6a"),r("4de4"),r("caad"),r("2532"),r("498a"),r("61f7")),s=r("ed08"),c=r("c24f"),u={components:{},data:function(){var e=function(e,t,r){Object(o["a"])(t)?r():r(new Error("输入数字,字母或下划线,长度大于3位"))},t=function(e,t,r){t.length<4?r(new Error("密码不能小于4位")):r()},r=function(e,t,r){var n=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;n.test(t)?r():r(new Error("请输入正确格式的邮箱地址"))};return{searchValue:"",centerDialogVisible:!1,pwnDialogVisible:!1,title:"注册用户",loginForm:{user_name:"",password:"",email:"",state:1},loginRules:{user_name:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}],email:[{required:!0,trigger:"blur",validator:r}]},loading:!1,pwdType:"password",tableData:[],currentTableData:[],currentPage:1}},created:function(){this.init()},methods:{init:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,c["a"].getAllUser();case 4:r=t.sent,e.tableData=r.result,e.currentTableData=r.result.slice(0,10),e.loading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},handleSearchUser:function(){var e=this;this.tableData=this.tableData.filter((function(t){return t.user_name.includes(e.searchValue.trim())})),this.currentTableData=this.tableData.slice(0,10),this.currentPage=1},handleReset:function(){this.searchValue="",this.init(),this.currentPage=1},handleChangeInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("注册用户"!==e.title){t.next=12;break}return t.next=3,c["a"].register(e.loginForm);case 3:if(r=t.sent,1075!==r.errorCode){t.next=9;break}return e.$message.error(r.reason),t.abrupt("return",!1);case 9:return e.$message.success("注册成功"),t.next=12,e.init();case 12:case"end":return t.stop()}}),t)})))()},handleDelete:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(n=e.sent,"confirm"!==n){e.next=11;break}return e.next=6,c["a"].deleteUser(t.id);case 6:r.$message.success("删除成功"),r.centerDialogVisible=!1,r.init(),e.next=12;break;case 11:r.$message.info("取消了删除!");case 12:case"end":return e.stop()}}),e)})))()},handleCommand:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("edit"!==e){n.next=4;break}r.$prompt("新密码",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"密码不能为空",inputValidator:function(e){if(!e)return"输入不能为空"}}).then(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.value,e.next=3,c["a"].updatePwd(t.id,a);case 3:r.$message.success("修改成功");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return e})),n.next=17;break;case 4:if("role"!==e){n.next=12;break}return a="user"===t.role?"administrator":"user",n.next=8,c["a"].updateRole(t.id,a);case 8:r.$message.success("修改成功"),t.role=a,n.next=17;break;case 12:return o=1===t.state?0:1,n.next=15,c["a"].updateState(t.id,o);case 15:r.$message.success("修改成功"),t.state=o;case 17:case"end":return n.stop()}}),n)})))()},handleDialogVisible:function(e,t){var r=this;this.centerDialogVisible=!0,"add"===e?(this.title="注册用户",this.$nextTick((function(){r.$refs.loginForm.resetFields(),r.$refs.loginForm.clearValidate()}))):(this.title="修改",this.$nextTick((function(){r.$refs.loginForm.clearValidate();var e=Object(s["b"])(t);r.loginForm.state=+e.state,r.loginForm.user_name=e.user_name,r.loginForm.password=e.password})))},handleUpdataPwn:function(){this.pwnDialogVisible=!0},handleCurrentChange:function(){this.currentTableData=this.tableData.slice(10*(this.currentPage-1),10*this.currentPage)}}},l=u,p=(r("f567"),r("2877")),d=Object(p["a"])(l,n,a,!1,null,"997b7586",null);t["default"]=d.exports},"44e7":function(e,t,r){var n=r("861d"),a=r("c6b6"),i=r("b622"),o=i("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==a(e))}},"498a":function(e,t,r){"use strict";var n=r("23e7"),a=r("58a8").trim,i=r("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return a(this)}})},"4de4":function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").filter,i=r("1dde"),o=i("filter");n({target:"Array",proto:!0,forced:!o},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("1d80"),a=r("577e"),i=r("5899"),o="["+i+"]",s=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),u=function(e){return function(t){var r=a(n(t));return 1&e&&(r=r.replace(s,"")),2&e&&(r=r.replace(c,"")),r}};e.exports={start:u(1),end:u(2),trim:u(3)}},"5a34":function(e,t,r){var n=r("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},"61f7":function(e,t,r){"use strict";function n(e){var t=/\w{3,9}/;return t.test(e)}r.d(t,"a",(function(){return n}))},"99af":function(e,t,r){"use strict";var n=r("23e7"),a=r("d039"),i=r("e8b5"),o=r("861d"),s=r("7b0b"),c=r("50c4"),u=r("8418"),l=r("65f0"),p=r("1dde"),d=r("b622"),f=r("2d00"),m=d("isConcatSpreadable"),g=9007199254740991,h="Maximum allowed index exceeded",b=f>=51||!a((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),v=p("concat"),w=function(e){if(!o(e))return!1;var t=e[m];return void 0!==t?!!t:i(e)},x=!b||!v;n({target:"Array",proto:!0,forced:x},{concat:function(e){var t,r,n,a,i,o=s(this),p=l(o,0),d=0;for(t=-1,n=arguments.length;t<n;t++)if(i=-1===t?o:arguments[t],w(i)){if(a=c(i.length),d+a>g)throw TypeError(h);for(r=0;r<a;r++,d++)r in i&&u(p,d,i[r])}else{if(d>=g)throw TypeError(h);u(p,d++,i)}return p.length=d,p}})},ab13:function(e,t,r){var n=r("b622"),a=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[a]=!1,"/./"[e](t)}catch(n){}}return!1}},c24f:function(e,t,r){"use strict";var n=r("1da1"),a=(r("99af"),r("96cf"),r("b775"));t["a"]={login:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["a"])({url:"/login/valid",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),register:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["a"])({url:"/users/add",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getAllUser:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["a"])({url:"/users/alluser",method:"get",params:t}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),deleteUser:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["a"])({url:"/users/delete?id="+t,method:"get"}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),updataPwd:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["a"])({url:"/users/changepwd?id=".concat(t,"$password=").concat(r),method:"get"}));case 1:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),updataState:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["a"])({url:"/users/changestate?id=".concat(t,"$state=").concat(r),method:"get"}));case 1:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),updataRole:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["a"])({url:"/users/changerole?id=".concat(t,"$password=").concat(r),method:"get"}));case 1:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),userinfo:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["a"])({url:"/users/userinfo?id="+t,method:"get"}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},c8d2:function(e,t,r){var n=r("d039"),a=r("5899"),i="​᠎";e.exports=function(e){return n((function(){return!!a[e]()||i[e]()!=i||a[e].name!==e}))}},caad:function(e,t,r){"use strict";var n=r("23e7"),a=r("4d64").includes,i=r("44d2");n({target:"Array",proto:!0},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},d1f7:function(e,t,r){},f567:function(e,t,r){"use strict";r("d1f7")},fb6a:function(e,t,r){"use strict";var n=r("23e7"),a=r("861d"),i=r("e8b5"),o=r("23cb"),s=r("50c4"),c=r("fc6a"),u=r("8418"),l=r("b622"),p=r("1dde"),d=p("slice"),f=l("species"),m=[].slice,g=Math.max;n({target:"Array",proto:!0,forced:!d},{slice:function(e,t){var r,n,l,p=c(this),d=s(p.length),h=o(e,d),b=o(void 0===t?d:t,d);if(i(p)&&(r=p.constructor,"function"!=typeof r||r!==Array&&!i(r.prototype)?a(r)&&(r=r[f],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return m.call(p,h,b);for(n=new(void 0===r?Array:r)(g(b-h,0)),l=0;h<b;h++,l++)h in p&&u(n,l,p[h]);return n.length=l,n}})}}]);
//# sourceMappingURL=chunk-4032ccf6.2f180435.js.map