{"version":3,"sources":["webpack:///./src/components/user/Register.vue?b14d","webpack:///src/components/user/Register.vue","webpack:///./src/components/user/Register.vue?8f5e","webpack:///./src/components/user/Register.vue","webpack:///./src/utils/validate.js","webpack:///./src/components/user/Register.vue?0826"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","handleBackSite","attrs","_v","ref","loginForm","loginRules","model","value","callback","$$v","$set","expression","slot","pwdType","nativeOn","$event","type","indexOf","_k","keyCode","key","handleRegister","apply","arguments","showPwd","_e","staticStyle","loading","preventDefault","staticRenderFns","name","components","data","Error","length","emailReg","test","dragVerifShow","user_name","password","email","created","console","log","methods","$router","push","component","isvalidUsername","str","reg"],"mappings":"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","file":"js/chunk-10b2e937.ac6e9e8e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-bg\"},[_c('span',{staticClass:\"back\",on:{\"click\":_vm.handleBackSite}},[_c('svg-icon',{staticClass:\"fh\",attrs:{\"icon-class\":\"fanhui1\"}}),_c('span',[_vm._v(\"返回登录\")])],1),_c('el-card',{staticClass:\"login-form-layout\"},[_c('el-form',{ref:\"loginForm\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.loginRules,\"label-position\":\"right\",\"hide-required-asterisk\":\"\",\"label-width\":\"60px\"}},[_c('h2',{staticClass:\"login-title color-main\"},[_vm._v(\"用户注册\")]),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{attrs:{\"name\":\"email\",\"placeholder\":\"请输入邮箱\",\"type\":\"email\"},model:{value:(_vm.loginForm.email),callback:function ($$v) {_vm.$set(_vm.loginForm, \"email\", $$v)},expression:\"loginForm.email\"}},[_c('span',{attrs:{\"slot\":\"prefix\"},slot:\"prefix\"},[_c('svg-icon',{staticClass:\"color-main\",attrs:{\"icon-class\":\"youxiang\"}})],1)])],1),_c('el-form-item',{attrs:{\"prop\":\"password\",\"label\":\"密码\"}},[_c('el-input',{attrs:{\"name\":\"password\",\"type\":_vm.pwdType,\"placeholder\":\"请输入密码\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleRegister.apply(null, arguments)}},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}},[_c('span',{attrs:{\"slot\":\"prefix\"},slot:\"prefix\"},[_c('svg-icon',{staticClass:\"color-main\",attrs:{\"icon-class\":\"mima\"}})],1),(_vm.pwdType)?_c('span',{attrs:{\"slot\":\"suffix\"},on:{\"click\":_vm.showPwd},slot:\"suffix\"},[_c('svg-icon',{staticClass:\"color-main\",attrs:{\"icon-class\":\"mimabiyan\"}})],1):_c('span',{attrs:{\"slot\":\"suffix\"},on:{\"click\":_vm.showPwd},slot:\"suffix\"},[_c('svg-icon',{staticClass:\"color-main\",attrs:{\"icon-class\":\"yanjing-\"}})],1)])],1),_c('el-form-item',{attrs:{\"prop\":\"user_name\",\"label\":\"昵称\"}},[_c('el-input',{attrs:{\"name\":\"user_name\",\"type\":\"text\",\"placeholder\":\"请输入昵称\"},model:{value:(_vm.loginForm.user_name),callback:function ($$v) {_vm.$set(_vm.loginForm, \"user_name\", $$v)},expression:\"loginForm.user_name\"}},[_c('span',{attrs:{\"slot\":\"prefix\"},slot:\"prefix\"},[_c('svg-icon',{staticClass:\"color-main\",attrs:{\"icon-class\":\"user\"}})],1)])],1),_c('el-form-item',{attrs:{\"label\":\"验证\"}},[(_vm.dragVerifShow)?_c('DragVerify',{ref:\"drags\",attrs:{\"width\":348}}):_vm._e()],1),_c('el-form-item',{staticStyle:{\"text-align\":\"center\"},attrs:{\"label-width\":\"0px\"}},[_c('el-button',{staticStyle:{\"width\":\"45%\"},attrs:{\"type\":\"primary\",\"loading\":_vm.loading},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.handleRegister.apply(null, arguments)}}},[_vm._v(\"注册\")])],1),_c('div',{staticStyle:{\"text-align\":\"center\",\"color\":\"#409eff\",\"font-size\":\"14px\"}},[_vm._v(\" 为了良好的用户体验，请使用谷歌浏览器 \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login-bg\">\n    <span @click=\"handleBackSite\" class=\"back\">\n      <svg-icon icon-class=\"fanhui1\" class=\"fh\"></svg-icon>\n      <span>返回登录</span>\n    </span>\n    <el-card class=\"login-form-layout\">\n      <el-form\n        :model=\"loginForm\"\n        :rules=\"loginRules\"\n        ref=\"loginForm\"\n        label-position=\"right\"\n        hide-required-asterisk\n        label-width=\"60px\"\n      >\n        <h2 class=\"login-title color-main\">用户注册</h2>\n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input\n            name=\"email\"\n            v-model=\"loginForm.email\"\n            placeholder=\"请输入邮箱\"\n            type=\"email\"\n          >\n            <span slot=\"prefix\">\n              <svg-icon icon-class=\"youxiang\" class=\"color-main\"></svg-icon>\n            </span>\n          </el-input>\n        </el-form-item>\n        <el-form-item prop=\"password\" label=\"密码\">\n          <el-input\n            name=\"password\"\n            :type=\"pwdType\"\n            @keyup.enter.native=\"handleRegister\"\n            v-model=\"loginForm.password\"\n            placeholder=\"请输入密码\"\n          >\n            <span slot=\"prefix\">\n              <svg-icon icon-class=\"mima\" class=\"color-main\"></svg-icon>\n            </span>\n            <span slot=\"suffix\" @click=\"showPwd\" v-if=\"pwdType\">\n              <svg-icon icon-class=\"mimabiyan\" class=\"color-main\"></svg-icon>\n            </span>\n            <span slot=\"suffix\" @click=\"showPwd\" v-else>\n              <svg-icon icon-class=\"yanjing-\" class=\"color-main\"></svg-icon>\n            </span>\n          </el-input>\n        </el-form-item>\n\n        <el-form-item prop=\"user_name\" label=\"昵称\">\n          <el-input\n            name=\"user_name\"\n            type=\"text\"\n            v-model=\"loginForm.user_name\"\n            placeholder=\"请输入昵称\"\n          >\n            <span slot=\"prefix\">\n              <svg-icon icon-class=\"user\" class=\"color-main\"></svg-icon>\n            </span>\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"验证\">\n          <DragVerify\n            ref=\"drags\"\n            :width=\"348\"\n            v-if=\"dragVerifShow\"\n          ></DragVerify>\n        </el-form-item>\n\n        <el-form-item style=\"text-align: center\" label-width=\"0px\">\n          <el-button\n            style=\"width: 45%\"\n            type=\"primary\"\n            :loading=\"loading\"\n            @click.native.prevent=\"handleRegister\"\n            >注册</el-button\n          >\n        </el-form-item>\n        <div style=\"text-align: center; color: #409eff; font-size: 14px\">\n          为了良好的用户体验，请使用谷歌浏览器\n        </div>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport DragVerify from '@/components/common/DragVerify.vue'\nimport { isvalidUsername } from '@/utils/validate'\nimport user from '@/api/user'\n\nexport default {\n  name: 'Register',\n  components: { DragVerify },\n  data () {\n    const validateUsername = (rule, value, callback) => {\n      if (!isvalidUsername(value) || !value) {\n        callback(new Error('输入数字,字母或下划线,长度大于3位'))\n      } else {\n        callback()\n      }\n    }\n    const validatePass = (rule, value, callback) => {\n      if (value.length < 4) {\n        callback(new Error('密码不能小于4位'))\n      } else {\n        callback()\n      }\n    }\n    const validateEmail = (rule, value, callback) => {\n      const emailReg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/\n      if (!emailReg.test(value)) {\n        callback(new Error('请输入正确格式的邮箱地址'))\n      } else {\n        callback()\n      }\n    }\n    return {\n      dragVerifShow: 1,\n      loginForm: {\n        user_name: '',\n        password: '',\n        email: ''\n      },\n      loginRules: {\n        user_name: [\n          { required: true, trigger: 'blur', validator: validateUsername }\n        ],\n        password: [\n          { required: true, trigger: 'blur', validator: validatePass }\n        ],\n        email: [{ required: true, trigger: 'blur', validator: validateEmail }]\n      },\n      loading: false,\n      pwdType: 'password'\n    }\n  },\n  created () {\n    console.log(process.env)\n  },\n  methods: {\n    handleBackSite () {\n      this.$router.push({ path: '/login' })\n    },\n    showPwd () {\n      if (this.pwdType === 'password') {\n        this.pwdType = ''\n      } else {\n        this.pwdType = 'password'\n      }\n    },\n    async handleRegister () {\n      this.$refs.loginForm.validate(async (valid) => {\n        if (valid) {\n          // this.$store.dispatch('Login', this.loginForm).then(() => {\n          //   this.loading = false;\n          //   setCookie(\"user_name\", this.loginForm.user_name, 15);\n          //   setCookie(\"password\", this.loginForm.password, 15);\n          //   this.$router.push({ path: '/login' })\n          // }).catch(() => {\n          //   this.loading = false\n          // })\n          // if (!this.$refs.drags.$refs.Verify.isPassing) {\n          //   this.$message.error(\"请滑动滑块以验证\");\n          //   return false;\n          // }\n          this.loading = true\n\n          try {\n            const res = await user.register(this.loginForm)\n            if (res.errorCode === 1075) {\n              this.$message.error(res.reason)\n              this.dragVerifShow = 0\n              setTimeout(() => {\n                this.dragVerifShow = 1\n              })\n              return false\n            }\n            this.$message.success('注册成功,即将跳转到登录页')\n            setTimeout(() => {\n              this.$router.replace({ path: '/login' })\n            }, 1000)\n            return false\n          } catch {\n            console.log('err')\n          }\n          this.loading = false\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.login-bg {\n  position: relative;\n  padding-top: 30px;\n  width: 100%;\n  height: 100%;\n  background: url(../../assets/images/loginBg.jpg) no-repeat 0 0;\n  // background-size: 100% 100%;\n  background-size: cover;\n  .topbar {\n    width: 1200px;\n    margin: 0 auto;\n    display: flex;\n    justify-content: space-between;\n    .topbar-back {\n      color: #fff;\n      margin-top: 35px;\n      cursor: pointer;\n    }\n  }\n}\n.login-form-layout {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 450px;\n  margin: auto;\n  transform: translate(-50%, -50%);\n}\n.login-header {\n  display: flex;\n  justify-content: space-between;\n  color: rgb(34, 118, 190);\n  font-size: 1rem;\n  .register {\n    cursor: pointer;\n    margin-right: 2rem;\n    span:first-child {\n      color: #b39999;\n    }\n  }\n}\n.login-title {\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.login-center-layout {\n  background: #409eff;\n  width: auto;\n  height: auto;\n  max-width: 100%;\n  max-height: 100%;\n  margin-top: 200px;\n}\n.back {\n  color: #fff;\n  cursor: pointer;\n  position: absolute;\n  top: 12rem;\n  left: 57%;\n  .fh {\n    font-size: 18px;\n    margin-right: 4px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=52ca4ec8&scoped=true&\"\nimport script from \"./Register.vue?vue&type=script&lang=js&\"\nexport * from \"./Register.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Register.vue?vue&type=style&index=0&id=52ca4ec8&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"52ca4ec8\",\n  null\n  \n)\n\nexport default component.exports","export function isvalidUsername (str) {\n  // const valid_map = ['admin', 'test']\n  // return valid_map.indexOf(str.trim()) >= 0\n  const reg = /\\w{3,9}/\n  return reg.test(str)\n}\n\n/* 合法uri */\nexport function validateURL (textval) {\n  const urlregex = /^(https?|ftp):\\/\\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\\/($|[a-zA-Z0-9.,?'\\\\+&%$#=~_-]+))*$/\n  return urlregex.test(textval)\n}\n\n/* 小写字母 */\nexport function validateLowerCase (str) {\n  const reg = /^[a-z]+$/\n  return reg.test(str)\n}\n\n/* 大写字母 */\nexport function validateUpperCase (str) {\n  const reg = /^[A-Z]+$/\n  return reg.test(str)\n}\n\n/* 大小写字母 */\nexport function validatAlphabets (str) {\n  const reg = /^[A-Za-z]+$/\n  return reg.test(str)\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=style&index=0&id=52ca4ec8&scoped=true&lang=less&\""],"sourceRoot":""}